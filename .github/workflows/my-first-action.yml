name: GitHub Actions Demo
on:
  workflow_dispatch:
    inputs:
      packageVersion:
        description: "version of the package"
        required: true
        default: "1.0.0"
  push:
    branches:
      - my-branch
jobs:
  install-dependencies:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/setup-node@v2
        with:
        node-version: "14"
      - uses: MYXOMOPX/modify-pkg-json@master
        with:
          target: ./package.json
          action: set_version
          argument: ${{ inputs.packageVersion }}
      - run: yarn i

  build:
    runs-on: ubuntu-latest
    steps:
      - run: yarn run build
    needs: [install-dependencies]

  run:
    runs-on: ubuntu-latest
    steps:
      - run: yarn start
    needs: [build]
